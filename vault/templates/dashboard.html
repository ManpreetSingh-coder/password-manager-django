{% load static %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard</title>

    <link rel="stylesheet" href="{% static 'dashboard_style.css' %}">
</head>
<body>

    <header>
        <h1>Password Vault</h1>
        <a href="{% url 'add_password' %}" class="add-btn">+ Add New</a>
    </header>

    <table>
    <tr>
        <th>Website</th>
        <th>Username / Email</th>
        <th>Password</th>
        <th>Action</th>
    </tr>

    {% for item in data %}
    <tr>
        <td>{{ item.website }}</td>
        <td>{{ item.username }}</td>
        <td>
            <span class="password-display" data-password="{{ item.password }}">••••••••</span>
            <button onclick="togglePassword(this)" style="margin-left: 10px;">Show</button>
        </td>
        <td>
            <a href="{% url 'delete_password' item.id %}" 
               onclick="return confirm('Are you sure you want to delete this password?')"
               class="btn btn-danger">
               Delete
            </a>
        </td>
    </tr>
    {% empty %}
    <tr>
        <td colspan="4" style="text-align:center; padding:20px;">
            No passwords added yet.
        </td>
    </tr>
    {% endfor %}
</table>

<script>
function togglePassword(button) {
    var passwordSpan = button.previousElementSibling;
    var password = passwordSpan.getAttribute('data-password');
    var currentText = passwordSpan.textContent;
    
    if (currentText === '••••••••') {
        passwordSpan.textContent = password;
        button.textContent = 'Hide';
    } else {
        passwordSpan.textContent = '••••••••';
        button.textContent = 'Show';
    }
}
</script>

</body>
</html>
